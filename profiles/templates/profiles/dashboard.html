{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<h1>👋 Welcome, {{ user.username }}!</h1>
<p>This is your FitZone Pro dashboard.</p>

<div class="row row-cols-1 row-cols-md-2 g-4 mt-4">

  <!-- 🥗 Nutrition Plans -->
  <div class="col">
    <div class="card shadow-sm h-100">
      <div class="card-body">
        <h5 class="card-title">🥗 Nutrition Plans</h5>
        <p class="card-text">Access your personalized meal plans and dietary tips.</p>
        <a href="{% url 'nutrition:meal_plans' %}" class="btn btn-primary">Go to Nutrition</a>
      </div>
    </div>
  </div>

  <!-- 🛒 Store -->
  <div class="col">
    <div class="card shadow-sm h-100">
      <div class="card-body">
        <h5 class="card-title">🛒 Store</h5>
        <p class="card-text">Browse and manage equipment and supplements.</p>
        <a href="{% url 'all_products' %}" class="btn btn-primary">Go to Store</a>
      </div>
    </div>
  </div>

  <!-- 🧑‍💼 Account Summary -->
  <div class="col">
    <div class="card shadow-sm h-100">
      <div class="card-body">
        <h5 class="card-title">🧑‍💼 Account Summary</h5>
        <ul class="list-unstyled">
          <li><strong>Username:</strong> {{ user.username }}</li>
          <li><strong>Email:</strong> {{ user.email }}</li>
          <li><strong>Joined:</strong> {{ user.date_joined|date:"M d, Y" }}</li>
        </ul>
        <a href="{% url 'settings' %}" class="btn btn-outline-primary">Manage Account</a>
      </div>
    </div>
  </div>

  <!-- 📝 Recent Activity -->
  <div class="col">
    <div class="card shadow-sm h-100">
      <div class="card-body">
        <h5 class="card-title">📝 Recent Activity</h5>
        <p class="card-text">You recently edited 2 products and added 1 recipe.</p>
        <a href="#" class="btn btn-outline-secondary disabled">View Details</a>
      </div>
    </div>
  </div>

  <!-- 💖 Liked / Saved Products -->
  <!-- 💾 Wishlist -->
<div class="col-12">
  <div class="card shadow-sm h-100">
    <div class="card-body">
      <h5 class="card-title">💾 Your Wishlist</h5>

      <!-- Tabs -->
      <ul class="nav nav-tabs" id="wishlistTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="recipes-tab" data-bs-toggle="tab" data-bs-target="#recipes" type="button" role="tab">🍽 Recipes</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="plans-tab" data-bs-toggle="tab" data-bs-target="#plans" type="button" role="tab">📋 Meal Plans</button>
        </li>
      </ul>

      <!-- Tab Content -->
      <div class="tab-content mt-3" id="wishlistTabContent">
        <!-- Recipes -->
        <div class="tab-pane fade show active" id="recipes" role="tabpanel">
          {% if saved_recipes %}
            <ul class="list-group">
              {% for item in saved_recipes %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                  {{ item.recipe.title }}
                  <a href="{% url 'nutrition:recipe_detail' item.recipe.id %}" class="btn btn-sm btn-outline-secondary">View</a>
                </li>
              {% endfor %}
            </ul>
          {% else %}
            <p class="text-muted mt-2">You haven't saved any recipes yet.</p>
          {% endif %}
        </div>

        <!-- Meal Plans -->
        <div class="tab-pane fade" id="plans" role="tabpanel">
          {% if saved_meal_plans %}
            <ul class="list-group">
              {% for item in saved_meal_plans %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                  {{ item.meal_plan.title }}
                  <a href="{% url 'nutrition:meal_plan_detail' item.meal_plan.id %}" class="btn btn-sm btn-outline-secondary">View</a>
                </li>
              {% endfor %}
            </ul>
          {% else %}
            <p class="text-muted mt-2">You haven't saved any meal plans yet.</p>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

  <!-- 🧭 Quick Actions -->
  <div class="col">
    <div class="card shadow-sm h-100">
      <div class="card-body">
        <h5 class="card-title">⚡ Quick Actions</h5>
        <div class="d-grid gap-2">
          <a href="{% url 'all_products' %}" class="btn btn-sm btn-outline-primary">🛍️ View All Products</a>
           <a href="{% url 'nutrition:recipes' %}" class="btn btn-sm btn-outline-danger"> View All Recipes</a>
          <a href="{% url 'nutrition:meal_plans' %}" class="btn btn-sm btn-outline-primary">🍎 View Meal Plans</a>
          <a href="{% url 'settings' %}" class="btn btn-sm btn-outline-secondary">⚙️ Settings</a>
        </div>
      </div>
    </div>
  </div>

</div>
{% endblock %}
