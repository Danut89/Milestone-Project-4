{% extends "base.html" %}
{% load static %}

{% block title %}{{ meal_plan.title }}{% endblock %}

{% block content %}
<section class="section-light py-5">
  <div class="container">

    <!-- ğŸ¥— Plan Header -->
    <div class="text-center mb-5">
      <h1 class="hero-title">{{ meal_plan.title }}</h1>
      <p class="hero-subtitle">{{ meal_plan.description }}</p>
    </div>

    <!-- ğŸ“Š Summary + Breakdown -->
    <div class="row g-4 mb-5">
      
      <!-- ğŸ–¼ Image + Summary -->
      <div class="col-md-4">
        <div class="bg-white p-4 rounded-4 shadow-sm text-center">
          {% if meal_plan.image %}
            <img src="{{ meal_plan.image.url }}" alt="{{ meal_plan.title }}" class="img-fluid rounded-3 mb-3">
          {% endif %}
          <p class="mb-2"><strong>ğŸ”¥ Calories:</strong> {{ meal_plan.calories }}</p>
          <p class="mb-2"><strong>â±ï¸ Duration:</strong> {{ meal_plan.duration_days }} days</p>
          <p><strong>ğŸ½ï¸ Goal:</strong> Weight Loss</p>
          <button class="hero-btn-black w-100 mt-4">â¤ï¸ Save to Wishlist</button>
        </div>
      </div>

      <!-- ğŸ“… Breakdown -->
      <div class="col-md-8">
        <div class="section-muted p-4 rounded-4">
          <h5 class="mb-4">ğŸ“… Daily Meal Breakdown</h5>
          <div class="accordion" id="mealPlanAccordion">
            {% for day in days %}
              <div class="accordion-item border-0 mb-2">
                <h2 class="accordion-header" id="heading{{ day.day_number }}">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ day.day_number }}">
                    Day {{ day.day_number }}
                  </button>
                </h2>
                <div id="collapse{{ day.day_number }}" class="accordion-collapse collapse" data-bs-parent="#mealPlanAccordion">
                  <div class="accordion-body">
                    {{ day.description|default:"No description available for this day." }}
                  </div>
                </div>
              </div>
            {% empty %}
              <p>No days added yet to this meal plan.</p>
            {% endfor %}
          </div>
        </div>
      </div>

    </div>

    <!-- ğŸ›’ Shopping Preview -->
    <div class="bg-white p-4 rounded-4 shadow-sm mb-5">
      <h5>ğŸ›’ Shopping List Preview</h5>
      <p class="mt-2 mb-3 text-muted small">ğŸ¥š Eggs &nbsp; ğŸ— Chicken Breast &nbsp; ğŸ¥¬ Spinach &nbsp; ğŸ¥‘ Avocados &nbsp; ğŸ… Cherry Tomatoes &nbsp; ğŸ« Greek Yogurt</p>
      <a href="#" class="btn btn-sm btn-outline-secondary">View Full Shopping List</a>
    </div>

    <!-- ğŸ“˜ About This Plan -->
    <div class="section-highlight p-4 rounded-4 mb-5">
      <h5>ğŸ“˜ About This Plan</h5>
      <p class="mt-2 text-muted">This meal plan is designed to help users achieve their weight loss goals while maintaining energy and satisfaction. Each day provides a mix of proteins, healthy fats, and complex carbs. Ideal for beginners or those restarting their journey!</p>
    </div>

    <!-- ğŸ’¬ Recommendations -->
    <div class="section-light pt-4">
      <h5 class="mb-4">ğŸ’¬ You Might Also Like</h5>
      <div class="row row-cols-1 row-cols-md-3 g-4">
        <div class="col">
          <div class="product-card p-4 rounded-4">
            <h6 class="mb-1">ğŸ¥— Vegan Reset (3-Day)</h6>
            <p class="text-muted small">Light & refreshing plant-based meals.</p>
            <a href="#" class="btn-featured btn-sm">View</a>
          </div>
        </div>
        <div class="col">
          <div class="product-card p-4 rounded-4">
            <h6 class="mb-1">ğŸ’ª High Protein Plan</h6>
            <p class="text-muted small">Perfect for muscle gain or gym-goers.</p>
            <a href="#" class="btn-featured btn-sm">View</a>
          </div>
        </div>
        <div class="col">
          <div class="product-card p-4 rounded-4">
            <h6 class="mb-1">ğŸ§˜ Balanced Energy Plan</h6>
            <p class="text-muted small">Ideal for busy professionals or students.</p>
            <a href="#" class="btn-featured btn-sm">View</a>
          </div>
        </div>
      </div>
    </div>

  </div>
</section>
{% endblock %}
